process FibreAnalyser  = {
    
    untracked PSet maxEvents = { untracked int32 input = 1 } //total = 3564 - using reduced amount because i ran out of disk space for the logger...
									  //total = 1 for the jet_counter (using the _2008_04_22.dat file)
    // Input file
    source = EmptySource {

    }
    
    // Logger
    service = MessageLogger {
        untracked vstring destinations     = { "detailedInfo.txt"}
        untracked PSet detailedInfo.txt    = { untracked string threshold = "INFO" } 
        untracked vstring debugModules     = { "FibreAnalysis" }
	//untracked vstring debugModules   = { "*" }
	untracked vstring suppressWarning  = { "source", "l1GctHwDigis" }
    }


module gctRaw = TextToRaw{
 //only select one of these at a time
 //untracked string filename = "counter_2008_15_05.dat"
 untracked string filename = "logical_id_2008_15_05.dat"
 //untracked string filename = "jet_counter_2008_04_22.dat"
}

module l1GctHwDigis = GctRawToDigi {
  InputTag inputLabel = gctRaw
  int32 gctFedId = 745
  untracked bool verbose = false
  bool hltMode = false
  bool grenCompatibilityMode = false
  untracked bool unpackEm = true
  untracked bool unpackJets = false
  untracked bool unpackEtSums = false
  untracked bool unpackInternEm = false
  untracked bool unpackRct = true
  untracked bool unpackFibres = true
}
    
    // Fibre Analyzer
    module FibreAnalysis = GctFibreAnalyzer {
	untracked InputTag FibreSource   = l1GctHwDigis
        
	 //make sure only one of these is set to true
	 untracked bool doLogicalID = false
        untracked bool doCounter = false
	 untracked bool doJetLogicalID = true
    }
    
    path p ={gctRaw, l1GctHwDigis, FibreAnalysis}
}

