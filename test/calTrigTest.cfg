process CalTrigPRODANAL  = {

   include "L1Trigger/L1GctAnalyzer/data/Services.cff"

   #
   # Generate the events with a particle gun
   #
   include "L1Trigger/L1GctAnalyzer/data/particleGun.cff"
   include "L1Trigger/L1GctAnalyzer/data/CalGeometrySetup.cff"
   include "L1Trigger/L1GctAnalyzer/data/SimDigi.cff"
   #
   replace FlatRandomPtGunSource.maxEvents=50
 
   # Here's the stuff we want to do with the digitised events
   include "L1Trigger/L1GctAnalyzer/data/calTrig.cff"
   include "L1Trigger/L1GctAnalyzer/data/JetMETanalysis.cff"
   include "L1Trigger/L1GctAnalyzer/data/ecalClustering.cff"
#   sequence postDigi = { calTrig, ecalLocalRecoSequence & ( jetMetNoEcalReco, ecalClustering ) }
   sequence postDigi = { calTrig, jetMetAnalysis }

   # Here's the test definition
   include "L1Trigger/L1GctAnalyzer/data/TrigTestAnalysis.cfi"
   replace test.histogramFileName="gctProdHistos.root"

   # Now order modules for execution
   # Note "test" needs to be executed last!
   #
   path p1 = { simDigi & postDigi }
   endpath analysis = { test }

   # uncomment if we want to write out the events as well as the histograms
   #include "L1Trigger/L1GctAnalyzer/data/OutputEvents.cff"
   #endpath outpath = { outputEvents }

}
